import{r as ye,s as A,x as X,n as j,i as ue}from"../chunks/scheduler.W2pu3yam.js";import{a as T,t as b,S as N,i as B,e as y,c as w,d as x,g as _,o as k,j as v,k as S,s as D,h as M,q as L,n as U,y as fe,u as I,v as P,w as R,x as V,m as Y,b as we,f as ve,l as $e,z as W,A as de}from"../chunks/index.BLTYVmq6.js";function E(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Te(n,e){T(n,1,1,()=>{e.delete(n.key)})}function Oe(n,e,t,r,c,s,i,u,m,f,p,h){let o=n.length,l=s.length,a=o;const d={};for(;a--;)d[n[a].key]=a;const O=[],$=new Map,z=new Map,G=[];for(a=l;a--;){const g=h(c,s,a),C=t(g);let H=i.get(C);H?r&&G.push(()=>H.p(g,e)):(H=f(C,g),H.c()),$.set(C,O[a]=H),C in d&&z.set(C,Math.abs(a-d[C]))}const J=new Set,Q=new Set;function K(g){b(g,1),g.m(u,p),i.set(g.key,g),p=g.first,l--}for(;o&&l;){const g=O[l-1],C=n[o-1],H=g.key,F=C.key;g===C?(p=g.first,o--,l--):$.has(F)?!i.has(H)||J.has(H)?K(g):Q.has(F)?o--:z.get(H)>z.get(F)?(Q.add(H),K(g)):(J.add(F),o--):(m(C,i),o--)}for(;o--;){const g=n[o];$.has(g.key)||m(g,i)}for(;l;)K(O[l-1]);return ye(G),O}const Ce=["hearts","diamonds","spades","clubs"],He=[0,1,2,3,4,5,6,7,8,9,10,11,12],Se=["ace","2","3","4","5","6","7","8","9","10","jack","queen","king"],Z=n=>Se[n],he=()=>{const n=[];for(let e=0;e<4;e++)for(let t=0;t<13;t++){const r={suit:Ce[e],rank:He[t]};n.push(r)}if(n.length!==52)throw new Error("deck is not 52 cards");return xe(n)},xe=n=>{const e=[...n];for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e},q=n=>({cards:[],handValue:"high card",id:n}),je=()=>({players:[q(0),q(1),q(2),q(3)],deck:he()}),Ee=n=>{for(let e=0;e<2;e++)for(const t of n.players){const r=n.deck.pop();if(r)t.cards.push(r);else{console.error("No more cards in the deck");return}}},De=()=>({post:{poker:je()}}),nt=Object.freeze(Object.defineProperty({__proto__:null,load:De},Symbol.toStringTag,{value:"Module"}));function Me(n){let e,t,r;return{c(){e=y("div"),t=y("img"),this.h()},l(c){e=w(c,"DIV",{class:!0});var s=x(e);t=w(s,"IMG",{src:!0,alt:!0,width:!0}),s.forEach(_),this.h()},h(){X(t.src,r=`../assets/cards/${Z(n[0].rank)}_of_${n[0].suit}.svg`)||k(t,"src",r),k(t,"alt","An alt text"),k(t,"width","70px"),k(e,"class","m-0.5")},m(c,s){v(c,e,s),S(e,t)},p(c,[s]){s&1&&!X(t.src,r=`../assets/cards/${Z(c[0].rank)}_of_${c[0].suit}.svg`)&&k(t,"src",r)},i:j,o:j,d(c){c&&_(e)}}}function Ie(n,e,t){let{card:r}=e;return n.$$set=c=>{"card"in c&&t(0,r=c.card)},[r]}class me extends N{constructor(e){super(),B(this,e,Ie,Me,A,{card:0})}}const Pe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0],ee=n=>{if(n.length<5)throw new Error("Hand size smaller than 5 is not possible to calculate");const e=_e(n),t=Ve(n);return ne(t)&&te(e)?Re(n,t):pe(e)?"four of kind":ge(e)?"full house":ne(t)?"flush":te(e)?"straight":ke(e)?"three of kind":Ae(e)?"two pair":be(e)?"pair":"high card"},te=n=>{let e=0;for(let t=0;t<14;t++)if(n[t]!==0){if(e++,e===5)return!0}else e=0;return!1},ne=n=>{for(const e of Object.values(n))if(e>=5)return!0;return!1},Re=(n,e)=>{const t=Ne(n),r=Be(e);if(re(t,9,r))return"royal flush";for(let s=0;s<9;s++)if(re(t,s,r))return"straight flush";const c=_e(n);return pe(c)?"four of kind":ge(c)?"full house":"flush"},re=(n,e,t)=>{const r=n.filter(c=>c.suit===t);for(let c=0;c<5;c++){const s=(e+c)%13;if(!r.some(i=>i.rank===s))return!1}return!0},_e=n=>{const e=Array.from(Pe);for(const t of n)t.rank===0?(e[0]++,e[13]++):e[t.rank]++;return e},Ve=n=>{const e={hearts:0,diamonds:0,clubs:0,spades:0};for(const t of n)e[t.suit]++;return e},pe=n=>n.some(e=>e>=4),ge=n=>ke(n)&&be(n),ke=n=>n.some(e=>e===3),Ae=n=>{let e=0;for(const t of n)t===2&&e++;return e>=2},be=n=>n.some(e=>e===2),Ne=n=>[...n].sort((e,t)=>e.rank-t.rank),Be=n=>{for(const e in n)if(n[e]>=5)return e;throw new Error("This shouldn't be called because hand should always be flush, when checking for straight flush")};function se(n,e,t){const r=n.slice();return r[2]=e[t],r}function le(n,e,t){const r=n.slice();return r[5]=e[t],r}function ae(n,e,t){const r=n.slice();return r[5]=e[t],r}function ce(n){let e,t;return e=new me({props:{card:n[5]}}),{c(){I(e.$$.fragment)},l(r){P(e.$$.fragment,r)},m(r,c){R(e,r,c),t=!0},p(r,c){const s={};c&1&&(s.card=r[5]),e.$set(s)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){T(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function oe(n){let e,t;return e=new me({props:{card:n[5]}}),{c(){I(e.$$.fragment)},l(r){P(e.$$.fragment,r)},m(r,c){R(e,r,c),t=!0},p(r,c){const s={};c&2&&(s.card=r[5]),e.$set(s)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){T(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Fe(n){let e;return{c(){e=y("p")},l(t){e=w(t,"P",{}),x(e).forEach(_)},m(t,r){v(t,e,r)},p:j,d(t){t&&_(e)}}}function qe(n){let e,t=ee(n[0].concat(n[2].cards))+"",r,c;return{c(){e=y("p"),r=we(t),c=D()},l(s){e=w(s,"P",{});var i=x(e);r=ve(i,t),c=M(i),i.forEach(_)},m(s,i){v(s,e,i),S(e,r),S(e,c)},p(s,i){i&3&&t!==(t=ee(s[0].concat(s[2].cards))+"")&&$e(r,t)},d(s){s&&_(e)}}}function ie(n,e){let t,r,c,s,i=E(e[2].cards),u=[];for(let o=0;o<i.length;o+=1)u[o]=oe(le(e,i,o));const m=o=>T(u[o],1,1,()=>{u[o]=null});function f(o,l){return o[0].length>=5?qe:Fe}let p=f(e),h=p(e);return{key:n,first:null,c(){t=y("div");for(let o=0;o<u.length;o+=1)u[o].c();r=D(),h.c(),c=Y(),this.h()},l(o){t=w(o,"DIV",{class:!0});var l=x(t);for(let a=0;a<u.length;a+=1)u[a].l(l);l.forEach(_),r=M(o),h.l(o),c=Y(),this.h()},h(){k(t,"class","mx-4 my-0.5 flex justify-between"),this.first=t},m(o,l){v(o,t,l);for(let a=0;a<u.length;a+=1)u[a]&&u[a].m(t,null);v(o,r,l),h.m(o,l),v(o,c,l),s=!0},p(o,l){if(e=o,l&2){i=E(e[2].cards);let a;for(a=0;a<i.length;a+=1){const d=le(e,i,a);u[a]?(u[a].p(d,l),b(u[a],1)):(u[a]=oe(d),u[a].c(),b(u[a],1),u[a].m(t,null))}for(L(),a=i.length;a<u.length;a+=1)m(a);U()}p===(p=f(e))&&h?h.p(e,l):(h.d(1),h=p(e),h&&(h.c(),h.m(c.parentNode,c)))},i(o){if(!s){for(let l=0;l<i.length;l+=1)b(u[l]);s=!0}},o(o){u=u.filter(Boolean);for(let l=0;l<u.length;l+=1)T(u[l]);s=!1},d(o){o&&(_(t),_(r),_(c)),fe(u,o),h.d(o)}}}function ze(n){let e,t,r,c,s=[],i=new Map,u,m=E(n[0]),f=[];for(let l=0;l<m.length;l+=1)f[l]=ce(ae(n,m,l));const p=l=>T(f[l],1,1,()=>{f[l]=null});let h=E(n[1]);const o=l=>l[2].id;for(let l=0;l<h.length;l+=1){let a=se(n,h,l),d=o(a);i.set(d,s[l]=ie(d,a))}return{c(){e=y("div"),t=y("div");for(let l=0;l<f.length;l+=1)f[l].c();r=D(),c=y("div");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=w(l,"DIV",{class:!0});var a=x(e);t=w(a,"DIV",{class:!0});var d=x(t);for(let $=0;$<f.length;$+=1)f[$].l(d);d.forEach(_),a.forEach(_),r=M(l),c=w(l,"DIV",{class:!0});var O=x(c);for(let $=0;$<s.length;$+=1)s[$].l(O);O.forEach(_),this.h()},h(){k(t,"class","m-4 flex justify-center"),k(e,"class","m-4"),k(c,"class","mx-6 grid grid-cols-2")},m(l,a){v(l,e,a),S(e,t);for(let d=0;d<f.length;d+=1)f[d]&&f[d].m(t,null);v(l,r,a),v(l,c,a);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(c,null);u=!0},p(l,[a]){if(a&1){m=E(l[0]);let d;for(d=0;d<m.length;d+=1){const O=ae(l,m,d);f[d]?(f[d].p(O,a),b(f[d],1)):(f[d]=ce(O),f[d].c(),b(f[d],1),f[d].m(t,null))}for(L(),d=m.length;d<f.length;d+=1)p(d);U()}a&3&&(h=E(l[1]),L(),s=Oe(s,a,o,1,l,h,i,c,Te,ie,null,se),U())},i(l){if(!u){for(let a=0;a<m.length;a+=1)b(f[a]);for(let a=0;a<h.length;a+=1)b(s[a]);u=!0}},o(l){f=f.filter(Boolean);for(let a=0;a<f.length;a+=1)T(f[a]);for(let a=0;a<s.length;a+=1)T(s[a]);u=!1},d(l){l&&(_(e),_(r),_(c)),fe(f,l);for(let a=0;a<s.length;a+=1)s[a].d()}}}function Ke(n,e,t){let{cardsOnTable:r}=e,{players:c}=e;return n.$$set=s=>{"cardsOnTable"in s&&t(0,r=s.cardsOnTable),"players"in s&&t(1,c=s.players)},[r,c]}class Le extends N{constructor(e){super(),B(this,e,Ke,ze,A,{cardsOnTable:0,players:1})}}function Ue(n){let e,t="deal",r,c;return{c(){e=y("button"),e.textContent=t,this.h()},l(s){e=w(s,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),W(e)!=="svelte-19nhu51"&&(e.textContent=t),this.h()},h(){k(e,"type","button"),k(e,"class","variant-ghost-primary btn mx-2 my-4")},m(s,i){v(s,e,i),r||(c=de(e,"click",function(){ue(n[0])&&n[0].apply(this,arguments)}),r=!0)},p(s,[i]){n=s},i:j,o:j,d(s){s&&_(e),r=!1,c()}}}function We(n,e,t){let{dealOnTable:r}=e;return n.$$set=c=>{"dealOnTable"in c&&t(0,r=c.dealOnTable)},[r]}class Ge extends N{constructor(e){super(),B(this,e,We,Ue,A,{dealOnTable:0})}}function Je(n){let e,t="new hand",r,c;return{c(){e=y("button"),e.textContent=t,this.h()},l(s){e=w(s,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),W(e)!=="svelte-qcu8fw"&&(e.textContent=t),this.h()},h(){k(e,"type","button"),k(e,"class","variant-ghost-primary btn mx-2 my-4")},m(s,i){v(s,e,i),r||(c=de(e,"click",function(){ue(n[0])&&n[0].apply(this,arguments)}),r=!0)},p(s,[i]){n=s},i:j,o:j,d(s){s&&_(e),r=!1,c()}}}function Qe(n,e,t){let{newHand:r}=e;return n.$$set=c=>{"newHand"in c&&t(0,r=c.newHand)},[r]}class Xe extends N{constructor(e){super(),B(this,e,Qe,Je,A,{newHand:0})}}function Ye(n){let e,t,r='Welcome to <span class="text-red-500">Poker Simulator</span>',c,s,i,u,m,f,p,h;return s=new Le({props:{cardsOnTable:n[1],players:n[0].players}}),m=new Ge({props:{dealOnTable:n[2]}}),p=new Xe({props:{newHand:n[3]}}),{c(){e=y("div"),t=y("h1"),t.innerHTML=r,c=D(),I(s.$$.fragment),i=D(),u=y("div"),I(m.$$.fragment),f=D(),I(p.$$.fragment),this.h()},l(o){e=w(o,"DIV",{class:!0});var l=x(e);t=w(l,"H1",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-19cjo1j"&&(t.innerHTML=r),c=M(l),P(s.$$.fragment,l),i=M(l),u=w(l,"DIV",{class:!0});var a=x(u);P(m.$$.fragment,a),f=M(a),P(p.$$.fragment,a),a.forEach(_),l.forEach(_),this.h()},h(){k(t,"class","h1"),k(u,"class","flex"),k(e,"class","flex min-h-screen flex-col items-center justify-center")},m(o,l){v(o,e,l),S(e,t),S(e,c),R(s,e,null),S(e,i),S(e,u),R(m,u,null),S(u,f),R(p,u,null),h=!0},p(o,[l]){const a={};l&2&&(a.cardsOnTable=o[1]),l&1&&(a.players=o[0].players),s.$set(a)},i(o){h||(b(s.$$.fragment,o),b(m.$$.fragment,o),b(p.$$.fragment,o),h=!0)},o(o){T(s.$$.fragment,o),T(m.$$.fragment,o),T(p.$$.fragment,o),h=!1},d(o){o&&_(e),V(s),V(m),V(p)}}}function Ze(n,e,t){let r,{data:c}=e;const s=c.post.poker;let i=0;const u=()=>{i===0?t(5,i=3):t(5,i+=1)},m=()=>{t(5,i=0),t(0,s.deck=he(),s);for(const f of s.players)f.cards=[];Ee(s)};return n.$$set=f=>{"data"in f&&t(4,c=f.data)},n.$$.update=()=>{n.$$.dirty&33&&t(1,r=s.deck.slice(0,i))},[s,r,u,m,c,i]}class rt extends N{constructor(e){super(),B(this,e,Ze,Ye,A,{data:4})}}export{rt as component,nt as universal};
